<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stream Cleaner Pro — Clean Any Live Sports Stream, Add Your Ads, Download</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --bg: #0f172a;           /* slate-900 */
      --panel: #0b1226;        /* deep navy panel */
      --muted: #94a3b8;        /* slate-400 */
      --text: #e2e8f0;         /* slate-200 */
      --brand: #60a5fa;        /* blue-400 */
      --brand-2:#38bdf8;       /* sky-400 */
      --ok:#22c55e;            /* green-500 */
      --warn:#f59e0b;          /* amber-500 */
      --error:#ef4444;         /* red-500 */
      --ring: 0 0 0 3px rgba(96,165,250,0.25);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      background: radial-gradient(1200px 600px at 20% -10%, rgba(56,189,248,.15), transparent 60%),
                  radial-gradient(1000px 500px at 80% 0%, rgba(96,165,250,.18), transparent 60%),
                  var(--bg);
      color:var(--text);
    }
    a{color:var(--brand)}
    .wrap{max-width:1120px; margin:0 auto; padding:24px}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:16px; padding:8px 0 24px;
    }
    .brand{display:flex; align-items:center; gap:12px; font-weight:800; letter-spacing:.2px}
    .brand i{color:var(--brand)}
    nav a{color:var(--muted); text-decoration:none; margin:0 12px; font-weight:600}
    nav a:hover{color:var(--text)}
    .cta{background:linear-gradient(135deg,var(--brand),var(--brand-2)); border:none; padding:10px 16px; color:white; border-radius:10px; font-weight:700; cursor:pointer}
    .cta:hover{filter:brightness(1.08)}
    .hero{
      display:grid; grid-template-columns: 1.2fr 1fr; gap:26px; align-items:stretch; margin-top:4px;
    }
    .hero h1{font-size:44px; line-height:1.05; margin:4px 0 8px}
    .hero p.lead{color:var(--muted); font-size:18px; margin:0 0 18px}
    .tool{
      background:linear-gradient(180deg, rgba(15,23,42,.7), rgba(11,18,38,.9));
      border:1px solid rgba(148,163,184,.15);
      border-radius:18px; padding:18px; position:relative; overflow:hidden;
      box-shadow: 0 10px 28px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
    }
    .tool::after{
      content:""; position:absolute; inset:-2px;
      background:
        linear-gradient(120deg, transparent 0 35%, rgba(96,165,250,.09) 45%, transparent 55% 100%),
        repeating-linear-gradient(90deg, rgba(56,189,248,.05), rgba(56,189,248,.05) 1px, transparent 1px, transparent 24px);
      pointer-events:none; mask: linear-gradient(#000,rgba(0,0,0,.2));
    }
    .step{margin-bottom:14px}
    label{display:block; font-size:13px; color:var(--muted); margin:6px 0}
    input, select, textarea{
      width:100%; padding:12px 14px; background:#0a1329; color:var(--text);
      border:1px solid rgba(148,163,184,.2); border-radius:12px; outline:none;
    }
    input:focus, select:focus, textarea:focus{box-shadow:var(--ring); border-color:rgba(96,165,250,.5)}
    .inline{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .tool-actions{display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-top:8px}
    .muted{color:var(--muted)}
    .badge{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:#0a1329; border:1px solid rgba(148,163,184,.18); font-size:12px}
    .switch{display:flex; align-items:center; gap:10px}
    .switch input{width:auto}
    .pill{padding:6px 10px; border-radius:999px; border:1px dashed rgba(148,163,184,.3); color:var(--muted); font-size:12px}
    .right-card{
      background:linear-gradient(180deg, rgba(11,18,38,.85), rgba(10,19,41,.95));
      border:1px solid rgba(148,163,184,.15);
      border-radius:18px; padding:18px;
      box-shadow: 0 10px 28px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
    }
    .grid-3{display:grid; grid-template-columns:repeat(3,1fr); gap:14px}
    .mini{
      background:#0a1329; border:1px solid rgba(148,163,184,.18); border-radius:14px; padding:14px;
    }
    .mini h4{margin:0 0 6px; font-size:14px}
    .mini p{margin:0; color:var(--muted); font-size:13px}
    .section{margin-top:40px}
    .pricing{
      background:linear-gradient(180deg, rgba(10,19,41,.9), rgba(11,18,38,.95));
      border:1px solid rgba(148,163,184,.18);
      padding:18px; border-radius:18px;
    }
    .price {font-size:40px; font-weight:800}
    .list{display:grid; gap:8px; margin:12px 0}
    .list .row{display:flex; gap:10px; align-items:flex-start}
    .row i{color:var(--ok); margin-top:3px}
    .roi-grid{display:grid; grid-template-columns:1fr 1fr; gap:14px}
    .card{background:#0a1329; border:1px solid rgba(148,163,184,.18); border-radius:14px; padding:14px}
    footer{margin:40px auto; color:var(--muted); text-align:center}
    @media (max-width:980px){
      .hero{grid-template-columns:1fr}
      nav{display:none}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand"><i class="fa-solid fa-bolt"></i> Stream Cleaner Pro</div>
      <nav>
        <a href="#how">How it Works</a>
        <a href="#pricing">Pricing</a>
        <a href="#roi">ROI & Profit</a>
        <a href="#faq">FAQ</a>
        <a href="/dashboard.html" class="cta">Dashboard</a>
      </nav>
    </header>

    <!-- HERO: one-time email-gated mini-tool -->
    <section class="hero">
      <div>
        <h1>Clean Any <span style="color:var(--brand)">Live Sports</span> Stream & Replace Ads</h1>
        <p class="lead">Pick a stream → strip popups & overlays → insert your ads → download ready-to-host HTML. One free use per email.</p>

        <div class="tool" id="miniTool">
          <!-- Step 0: email gate -->
          <div class="step">
            <label for="email">Enter a valid email (one use per email)</label>
            <div class="inline">
              <input id="email" type="email" placeholder="you@example.com" required />
              <button id="checkBtn" class="cta" type="button"><i class="fa-regular fa-circle-check"></i> Unlock Tool</button>
            </div>
            <div id="emailHelp" class="muted" style="margin-top:8px">We’ll verify you haven’t already claimed your one-time use.</div>
          </div>

          <hr style="border-color:rgba(148,163,184,.15); border-width:0 0 1px; margin:14px 0" />

          <!-- Step 1 -->
          <div class="step">
            <div class="inline">
              <div>
                <label for="sport">Sport</label>
                <select id="sport">
                  <option value="football">Football (Soccer)</option>
                  <option value="basketball">Basketball</option>
                  <option value="american_football">American Football</option>
                  <option value="mma">MMA</option>
                  <option value="tennis">Tennis</option>
                  <option value="motorsport">Motorsport</option>
                  <option value="other">Other</option>
                </select>
              </div>
              <div>
                <label for="streamUrl">Stream iframe URL</label>
                <input id="streamUrl" type="url" placeholder="https://example.com/embed/stream" />
              </div>
            </div>
          </div>

          <!-- Step 2 -->
          <div class="step">
            <label for="adCode">Your ad JavaScript / tags (optional for demo)</label>
            <textarea id="adCode" rows="4" placeholder="Paste your ad network tag or custom JS here..."></textarea>
            <div class="tool-actions">
              <label class="switch">
                <input id="totalsportekMode" type="checkbox" />
                <span>Include approved link block (TotalSportek + mirrors)</span>
              </label>
              <span class="pill">Sandboxed • Lightweight • Clean</span>
            </div>
          </div>

          <!-- Step 3 -->
          <div class="tool-actions">
            <button id="cleanBtn" class="cta" type="button"><i class="fa-solid fa-wand-magic-sparkles"></i> Clean & Download</button>
            <span id="status" class="muted"></span>
          </div>
        </div>

        <div style="margin-top:14px; display:flex; gap:10px; align-items:center; flex-wrap:wrap">
          <span class="badge"><i class="fa-solid fa-shield-halved"></i> JS sandbox, popups removed</span>
          <span class="badge"><i class="fa-solid fa-gauge"></i> Lightweight embed output</span>
          <span class="badge"><i class="fa-solid fa-bullhorn"></i> Bring-your-own ad tags</span>
        </div>
      </div>

      <aside class="right-card">
        <h3 style="margin:0 0 8px">How it Works</h3>
        <div class="grid-3">
          <div class="mini"><h4>1) Select</h4><p>Pick a live stream (any sport) or paste an iframe URL.</p></div>
          <div class="mini"><h4>2) Clean</h4><p>We strip popups, overlays, and shady scripts in a sandbox.</p></div>
          <div class="mini"><h4>3) Monetize</h4><p>Inject your own ads. Export a clean, host-anywhere HTML.</p></div>
        </div>
        <div class="pricing section" id="pricing">
          <div style="display:flex; justify-content:space-between; align-items:center; gap:8px">
            <div><div class="muted">Monthly</div><div class="price">$25</div></div>
            <a href="https://gumroad.com" target="_blank" class="cta">Subscribe</a>
          </div>
          <div class="list">
            <div class="row"><i class="fa-solid fa-check"></i><div>Unlimited cleans (paid plan)</div></div>
            <div class="row"><i class="fa-solid fa-check"></i><div>Ad tag injection & sandbox</div></div>
            <div class="row"><i class="fa-solid fa-check"></i><div>Downloadable HTML, host anywhere</div></div>
            <div class="row"><i class="fa-solid fa-check"></i><div>Approved links block (optional)</div></div>
          </div>
        </div>
      </aside>
    </section>

    <!-- ROI & lead nurturing -->
    <section class="section" id="roi">
      <h2>Profit & ROI Calculator</h2>
      <p class="muted">Estimate how quickly you cover $25/mo and scale. Adjust CTR / CPM to match your ad network.</p>

      <div class="roi-grid">
        <div class="card">
          <h3 style="margin-top:0">Assumptions</h3>
          <div class="inline">
            <div>
              <label>Monthly visits</label>
              <input id="visits" type="number" min="0" value="10000" />
            </div>
            <div>
              <label>Pageviews / visit</label>
              <input id="ppv" type="number" min="1" value="1.6" step="0.1" />
            </div>
          </div>
          <div class="inline" style="margin-top:10px">
            <div>
              <label>Display CPM ($)</label>
              <input id="cpm" type="number" min="0" value="2.5" step="0.1" />
            </div>
            <div>
              <label>Click-ads CTR (%)</label>
              <input id="ctr" type="number" min="0" value="0.7" step="0.1" />
            </div>
          </div>
          <div class="inline" style="margin-top:10px">
            <div>
              <label>Avg CPC ($)</label>
              <input id="cpc" type="number" min="0" value="0.15" step="0.01" />
            </div>
            <div>
              <label>Video preroll eCPM ($)</label>
              <input id="vecpm" type="number" min="0" value="6.0" step="0.1" />
            </div>
          </div>
          <button id="calcBtn" class="cta" style="margin-top:12px" type="button">Recalculate</button>
        </div>

        <div class="card">
          <h3 style="margin-top:0">Projected Revenue</h3>
          <div id="revDisplay" class="muted">Enter numbers and click Recalculate.</div>
          <div style="margin-top:12px">
            <span class="badge"><i class="fa-solid fa-bullseye"></i> Break-even visitors: <span id="beVisitors">—</span></span>
          </div>
        </div>
      </div>
      <!-- Live stream suggestions -->
<div class="section">
  <h3>Sample Live Stream Suggestions</h3>
  <p class="muted">Quickly pick a demo stream link (from Scorebat/IPTV feeds) if you don’t have one handy.</p>
  <select id="suggestions"></select>
  <button class="cta" type="button" id="useSuggestion">Use this stream</button>
</div>

<!-- Conversion strip -->
<div class="section" style="text-align:center; background:#0a1329; border-radius:14px; padding:14px; margin-top:20px; border:1px solid rgba(148,163,184,.18)">
  <span class="muted">At $25/mo, you break even at</span>
  <strong style="color:var(--brand); margin-left:6px" id="beStrip">— visitors</strong>
  <span class="muted">per month.</span>
</div>


      <div class="section grid-3">
        <div class="mini">
          <h4>Why this is profitable</h4>
          <p>Clean players keep users longer → more pageviews → higher ad yield. You control the ad stack, not shady overlays.</p>
        </div>
        <div class="mini">
          <h4>Placement tips</h4>
          <p>One 728×90 above player, one 300×250 below, and a light preroll. Balance UX & RPM.</p>
        </div>
        <div class="mini">
          <h4>Traffic ideas</h4>
          <p>Match threads, Discords, Twitter/X trends, Telegram channels, SEO for “where to watch”.</p>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="section" id="faq">
      <h2>FAQ</h2>
      <div class="grid-3">
        <div class="mini">
          <h4>Can I use any live sport?</h4>
          <p>Yes—football, basketball, NFL, MMA, tennis, motorsport, and more. Paste any embed URL.</p>
        </div>
        <div class="mini">
          <h4>Is the output lightweight?</h4>
          <p>Yes. We sandbox the iframe and ship a minimal HTML wrapper that you can host anywhere.</p>
        </div>
        <div class="mini">
          <h4>One-time use on this page?</h4>
          <p>Correct. Enter an email once to try it here. Paid plan unlocks unlimited cleans inside the dashboard.</p>
        </div>
      </div>
    </section>
    <section id="pricing" class="pricing-section">
  <h2><i class="fas fa-dollar-sign"></i> Pricing</h2>
  <div class="pricing-card">
    <h3>All-Inclusive Plan</h3>
    <p class="price">$35/month</p>
    <ul class="features">
      <li>✔ Unlimited iframe cleaning</li>
      <li>✔ Inject your ad network code</li>
      <li>✔ Download ready-to-host HTML files</li>
      <li>✔ Access verified stream list</li>
      <li>✔ One-click clean + export</li>
      
    </ul>
    <a href="https://ko-fi.com/streamcleanerpro/tiers" target="_blank">
      <button>Subscribe Now</button>
    </a>
  </div>
</section>

    <footer>
      © <span id="y"></span> Stream Cleaner Pro — Clean streams. Replace ads. Monetize ethically.<br/>
      <span class="muted">One-time use tool powered by Netlify Functions.</span>
    </footer>
  </div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // ROI Calculator
    function calc(){
      const visits = +document.getElementById('visits').value || 0;
      const ppv = +document.getElementById('ppv').value || 1;
      const cpm = +document.getElementById('cpm').value || 0;
      const ctr = (+document.getElementById('ctr').value || 0) / 100;
      const cpc = +document.getElementById('cpc').value || 0;
      const vecpm = +document.getElementById('vecpm').value || 0;

      const pageviews = visits * ppv;
      const displayRev = (pageviews / 1000) * cpm;
      const clicks = pageviews * ctr;
      const clickRev = clicks * cpc;
      const prerollRev = (pageviews / 1000) * vecpm;

      const total = displayRev + clickRev + prerollRev;
      const txt = `
        <div>Display Ads (CPM): <strong>$${displayRev.toFixed(2)}</strong></div>
        <div>Click Ads (CTR×CPC): <strong>$${clickRev.toFixed(2)}</strong></div>
        <div>Video Preroll (eCPM): <strong>$${prerollRev.toFixed(2)}</strong></div>
        <hr style="border-color:rgba(148,163,184,.15)"/>
        <div>Total Monthly: <strong>$${total.toFixed(2)}</strong></div>
        <div class="muted">Plan cost: $25 → Net: <strong>$${(total - 25).toFixed(2)}</strong></div>
      `;
      document.getElementById('revDisplay').innerHTML = txt;

      // Break-even visitors (rough): solve visits where total = 25
      // total = (visits*ppv/1000)*cpm + (visits*ppv*ctr)*cpc + (visits*ppv/1000)*vecpm
      const a = (ppv/1000)*(cpm + vecpm) + (ppv*ctr*cpc);
      const be = a > 0 ? Math.ceil(25 / a) : 0;
      document.getElementById('beVisitors').textContent = be ? be.toLocaleString() : '—';
    }
    calc();
    document.getElementById('calcBtn').addEventListener('click', calc);

    // One-time email gate + clean & download
    let emailApproved = false;

    document.getElementById('checkBtn').addEventListener('click', async () => {
      const email = (document.getElementById('email').value || '').trim();
      const status = document.getElementById('status');
      if(!email || !/^\S+@\S+\.\S+$/.test(email)){
        status.textContent = 'Please enter a valid email.';
        status.style.color = 'var(--warn)';
        return;
      }
      status.textContent = 'Checking…';
      status.style.color = 'var(--muted)';
      try{
        const res = await fetch('/.netlify/functions/check-email', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ email })
        });
        const data = await res.json();
        if(data.allowed){
          emailApproved = true;
          status.textContent = 'Email verified. You can use the tool now.';
          status.style.color = 'var(--ok)';
        }else{
          status.textContent = 'This email already used the one-time tool. Please subscribe for unlimited use.';
          status.style.color = 'var(--error)';
        }
      }catch(e){
        status.textContent = 'Server error. Please try again.';
        status.style.color = 'var(--error)';
      }
    });

    document.getElementById('cleanBtn').addEventListener('click', async () => {
      const status = document.getElementById('status');
      if(!emailApproved){
        status.textContent = 'Please unlock the tool with your email first.';
        status.style.color = 'var(--warn)';
        return;
      }
      const iframeUrl = (document.getElementById('streamUrl').value || '').trim();
      if(!iframeUrl){
        status.textContent = 'Enter a valid stream iframe URL.';
        status.style.color = 'var(--warn)';
        return;
      }
      status.textContent = 'Cleaning stream and preparing download…';
      status.style.color = 'var(--muted)';

      const adScript = document.getElementById('adCode').value || '';
      const sport = document.getElementById('sport').value;
      const compliance = document.getElementById('totalsportekMode').checked;

      try{
        const res = await fetch('/.netlify/functions/clean-stream-lite', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ iframeUrl, adScript, sport, compliance })
        });
        if(!res.ok){
          throw new Error('Function failed');
        }
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `clean_stream_${sport}.html`;
        a.click();
        URL.revokeObjectURL(url);

        status.textContent = '✅ Downloaded cleaned HTML.';
        status.style.color = 'var(--ok)';
      }catch(e){
        status.textContent = 'Cleaning failed. Please try again.';
        status.style.color = 'var(--error)';
      }
    });
    // --- Live stream suggestions ---
const sampleStreams = [
  { sport: "football", name: "Man United vs Arsenal", url: "https://example.com/embed/football1" },
  { sport: "basketball", name: "Lakers vs Celtics", url: "https://example.com/embed/basketball1" },
  { sport: "american_football", name: "Patriots vs Cowboys", url: "https://example.com/embed/nfl1" },
  { sport: "mma", name: "UFC Main Card", url: "https://example.com/embed/mma1" },
  { sport: "tennis", name: "US Open Final", url: "https://example.com/embed/tennis1" }
];
const suggestions = document.getElementById("suggestions");
sampleStreams.forEach(s => {
  const opt = document.createElement("option");
  opt.value = s.url;
  opt.textContent = `${s.sport.toUpperCase()} — ${s.name}`;
  opt.dataset.sport = s.sport;
  suggestions.appendChild(opt);
});
document.getElementById("useSuggestion").addEventListener("click", () => {
  const opt = suggestions.options[suggestions.selectedIndex];
  document.getElementById("streamUrl").value = opt.value;
  document.getElementById("sport").value = opt.dataset.sport;
});

// --- Sync ROI break-even strip ---
function updateStrip() {
  document.getElementById("beStrip").textContent =
    document.getElementById("beVisitors").textContent;
}
document.getElementById("calcBtn").addEventListener("click", updateStrip);
updateStrip();

  </script>
</body>
</html>
