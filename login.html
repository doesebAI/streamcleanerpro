<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login - Stream Cleaner Pro</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    body {font-family: Arial, sans-serif; background:#f9fafb; display:flex; justify-content:center; align-items:center; height:100vh;}
    .auth-box {background:#fff; padding:2rem; border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,0.08); width:320px; text-align:center;}
    .auth-box input {width:100%; padding:0.8rem; margin:0.5rem 0; border:1px solid #d1d5db; border-radius:6px;}
    .auth-box button {width:100%; padding:0.8rem; background:#2563eb; color:#fff; border:none; border-radius:6px; cursor:pointer;}
    .auth-box button:hover {background:#1d4ed8;}
    a {display:block; margin-top:1rem; font-size:0.9rem; color:#2563eb;}
  </style>
</head>
<body>
  <div class="auth-box">
    <h2>Login</h2>
    <input type="email" id="loginEmail" placeholder="Email" />
    <input type="password" id="loginPassword" placeholder="Password" />
    <button onclick="login()">Login</button>
    <a href="register.html">Don't have an account? Register</a>
  </div>

  <script>
    const supabaseUrl = "https://rfuilglpyamrjbtkacqw.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJmdWlsZ2xweWFtcmpidGthY3F3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4MjAxNzEsImV4cCI6MjA3MDM5NjE3MX0.vVUrlCdmenG-wh3X3lK_4UeiVDpbvGBbGSYalwY4u9I";
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    async function login() {
      const email = document.getElementById("loginEmail").value;
      const password = document.getElementById("loginPassword").value;

      const { data, error } = await supabase.auth.signInWithPassword({ email, password });
      if (error) {
        alert(error.message);
      } else {
        localStorage.setItem("supabase_session", JSON.stringify(data.session));
        window.location.href = "dashboard.html";
      }
    }
  </script>
</body>
</html>
